<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For Velma</title>
    <style>
        body { margin: 0; background: #000; color: #ff69b4; font-family: 'Courier New', monospace; overflow: hidden; height: 100vh; display: flex; justify-content: center; align-items: center; }
        #start-btn { padding: 20px; border: 2px solid #ff69b4; background: none; color: #ff69b4; cursor: pointer; box-shadow: 0 0 10px #ff69b4; font-size: 1.2rem; z-index: 100; }
        #scan-layer { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 50; flex-direction: column; justify-content: center; align-items: center; }
        .barcode { width: 200px; height: 200px; border: 4px solid #ff69b4; position: relative; }
        .line { width: 100%; height: 4px; background: #ff69b4; position: absolute; box-shadow: 0 0 15px #ff69b4; animation: scan 2s infinite; }
        @keyframes scan { 0% { top: 0; } 50% { top: 100%; } 100% { top: 0; } }
        canvas { display: none; position: fixed; top: 0; left: 0; z-index: 10; }
        #msg-layer { display: none; position: fixed; z-index: 60; text-align: center; width: 100%; }
        .count { font-size: 8rem; text-shadow: 0 0 20px #ff69b4; }
        .final { font-size: 2.5rem; display: none; animation: pop 0.5s ease-out; line-height: 1.5; }
        @keyframes pop { from { transform: scale(0); } to { transform: scale(1); } }
    </style>
</head>
<body>

    <button id="start-btn" onclick="mulai()">KLIK DISINI DULU</button>
    <audio id="lagu" src="musik.mp3"></audio>

    <div id="scan-layer">
        <div class="barcode"><div class="line"></div></div>
        <p style="margin-top:20px">SCANNING IDENTITY...</p>
    </div>

    <canvas id="canvas"></canvas>

    <div id="msg-layer">
        <div id="angka" class="count"></div>
        <div id="teks" class="final">
            AKU MENCINTAIMU<br>SELALU<br>
            <strong style="font-size: 4rem;">VELMA</strong><br>❤️
        </div>
    </div>

    <script>
        const audio = document.getElementById('lagu');
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        function mulai() {
            document.getElementById('start-btn').style.display = 'none';
            audio.play().catch(() => { alert("Klik layar sekali lagi untuk musik!"); });
            
            // 1. Scan Barcode
            document.getElementById('scan-layer').style.display = 'flex';
            
            setTimeout(() => {
                document.getElementById('scan-layer').style.display = 'none';
                initMatrix();
            }, 3000);
        }

        function initMatrix() {
            canvas.style.display = 'block';
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            const chars = "0123456789";
            const drops = Array(Math.floor(canvas.width/16)).fill(1);

            function draw() {
                ctx.fillStyle = "rgba(0,0,0,0.05)";
                ctx.fillRect(0,0,canvas.width,canvas.height);
                ctx.fillStyle = "#ff69b4";
                drops.forEach((y, i) => {
                    const text = chars[Math.floor(Math.random()*chars.length)];
                    ctx.fillText(text, i*16, y*16);
                    if(y*16 > canvas.height && Math.random() > 0.975) drops[i] = 0;
                    drops[i]++;
                });
            }
            const loop = setInterval(draw, 33);

            // 2. Countdown 3 2 1
            setTimeout(() => {
                document.getElementById('msg-layer').style.display = 'block';
                let c = 3;
                const timer = setInterval(() => {
                    document.getElementById('angka').innerText = c;
                    if(c <= 0) {
                        clearInterval(timer);
                        clearInterval(loop);
                        document.getElementById('angka').style.display = 'none';
                        document.getElementById('teks').style.display = 'block';
                        ctx.fillStyle = "black";
                        ctx.fillRect(0,0,canvas.width,canvas.height);
                    }
                    c--;
                }, 1000);
            }, 3000);
        }
    </script>
</body>
</html>
